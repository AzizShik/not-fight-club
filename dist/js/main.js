/*! For license information please see main.js.LICENSE.txt */
!function(){"use strict";var t="",e=t+"assets/images/character_frodo.jpg",n=t+"assets/images/enemy_spider.jpg",r={player:{name:"",avatar:"",wins:0,loses:0,health:100,maxHealth:100,attack:10,attackZones:1,defendZones:2,critChance:.2,critMultiplier:1.5},battle:{playerAttack:[],playerDefend:[],enemyAttack:[],enemyDefend:[],log:[]},enemy:{name:"Spider",avatar:n,health:80,maxHealth:80,attack:12,critChance:.25,critMultiplier:1.5,attackZones:2,defendZones:1},enemies:[{name:"Spider",avatar:n,health:80,maxHealth:80,attack:12,critChance:.25,critMultiplier:1.5,attackZones:2,defendZones:1},{name:"Troll",avatar:t+"assets/images/enemy_troll.jpg",health:120,maxHealth:120,attack:8,critChance:.1,critMultiplier:2,attackZones:1,defendZones:3},{name:"Knight",avatar:t+"assets/images/enemy_knight.jpg",health:100,maxHealth:100,attack:10,critChance:.15,critMultiplier:1.5,attackZones:1,defendZones:2},{name:"Sauron",avatar:t+"assets/images/enemy_sauron.jpg",health:150,maxHealth:150,attack:15,critChance:.15,critMultiplier:1.5,attackZones:2,defendZones:2}]};function a(){localStorage.setItem("notFightClubGame",JSON.stringify(r))}function o(){var t=localStorage.getItem("notFightClubGame");if(t){var e=JSON.parse(t);Object.assign(r,e)}}var c=t+"assets/images/character_gandalf.jpg",i=t+"assets/images/character_aragorn.jpg",u=t+"assets/images/character_legolas.jpg",l=t+"assets/images/cup.svg",s=t+"assets/images/lose.svg";function p(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var u=r&&r.prototype instanceof i?r:i,l=Object.create(u.prototype);return f(l,"_invoke",function(n,r,a){var o,i,u,l=0,s=a||[],p=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return o=e,i=0,u=t,f.n=n,c}};function d(n,r){for(i=n,u=r,e=0;!p&&l&&!a&&e<s.length;e++){var a,o=s[e],d=f.p,h=o[2];n>3?(a=h===r)&&(u=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=d&&((a=n<2&&d<o[1])?(i=0,f.v=r,f.n=o[1]):d<h&&(a=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,f.n=h,i=0))}if(a||n>1)return c;throw p=!0,r}return function(a,s,h){if(l>1)throw TypeError("Generator is already running");for(p&&1===s&&d(s,h),i=s,u=h;(e=i<2?t:u)||!p;){o||(i?i<3?(i>1&&(f.n=-1),d(i,u)):f.n=u:f.v=u);try{if(l=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(p=f.n<0)?u:n.call(r,f))!==c)break}catch(e){o=t,i=1,u=e}finally{l=1}}return{value:e,done:p}}}(n,a,o),!0),l}var c={};function i(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(f(e={},r,function(){return this}),e),d=l.prototype=i.prototype=Object.create(s);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,f(t,a,"GeneratorFunction")),t.prototype=Object.create(d),t}return u.prototype=l,f(d,"constructor",l),f(l,"constructor",u),u.displayName="GeneratorFunction",f(l,a,"GeneratorFunction"),f(d),f(d,a,"Generator"),f(d,r,function(){return this}),f(d,"toString",function(){return"[object Generator]"}),(p=function(){return{w:o,m:h}})()}function f(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}f=function(t,e,n,r){function o(e,n){f(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},f(t,e,n,r)}function d(t,e,n,r,a,o,c){try{var i=t[o](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,a)}var h,y,v=null,m=null,_=null,b=!1;function g(){var t=document.querySelector("[data-battle_log]");if(r.enemy.name)r.battle.log.forEach(function(t){t.isCrit&&t.isBlocked?E(t):t.isBlocked?j(t):E(t)});else{var e=Math.floor(Math.random()*r.enemies.length);r.enemy=JSON.parse(JSON.stringify(r.enemies[e])),a()}G();var n=document.querySelector("[data-battle_controls_attack_btn]");n.disabled=!0;var o=document.querySelector("[data-battle_zone_attack]"),c=document.querySelector("[data-battle_zone_defence]"),i=o.querySelectorAll("input"),u=c.querySelectorAll("input");i.forEach(function(t){t.checked=!1}),u.forEach(function(t){t.checked=!1}),v&&o.removeEventListener("click",v),m&&c.removeEventListener("click",m);var f=r.player.attackZones,h=[];v=function(t){var e=t.target;if("LABEL"!==e.tagName){var n=o.querySelectorAll("input:checked").length;e.closest("[data-battle_zone_attack_radio]")&&(e.checked&&h.length<f&&h.push(e),e.checked||(e.checked=!1,h=h.filter(function(t){return t!=e})),n>f&&(h.shift().checked=!1,h.push(e))),w()}};var y=r.player.defendZones,g=[];function w(){f===h.length&y===g.length?n.disabled=!1:n.disabled=!0}m=function(t){var e=t.target;if("LABEL"!==e.tagName){var n=c.querySelectorAll("input:checked").length;e.closest("[data-battle_zone_defence_radio]")&&(e.checked&&g.length<y&&g.push(e),e.checked||(e.checked=!1,g=g.filter(function(t){return t!=e})),n>y&&(g.shift().checked=!1,g.push(e))),w()}},o.addEventListener("click",v),c.addEventListener("click",m),_&&n.removeEventListener("click",_),_=function(t){var e,n,o=[],c=[];h.forEach(function(t){o.push(t.dataset.battle_zone_attack_input)}),g.forEach(function(t){c.push(t.dataset.battle_zone_defence_input)}),(e=r.battle.playerAttack).push.apply(e,o),(n=r.battle.playerDefend).push.apply(n,c),function(){for(var t=0;r.battle.enemyAttack.length<r.enemy.attackZones;t++){var e=Math.floor(Math.random()*k.length);r.battle.enemyAttack.includes(k[e])||r.battle.enemyAttack.push(k[e])}}(),function(){for(var t=0;r.battle.enemyDefend.length<r.enemy.defendZones;t++){var e=Math.floor(Math.random()*k.length);r.battle.enemyDefend.includes(k[e])||r.battle.enemyDefend.push(k[e])}}(),a(),S(),r.battle.playerAttack=[],r.battle.playerDefend=[],r.battle.enemyAttack=[],r.battle.enemyDefend=[],a()},n.addEventListener("click",_);var k=["head","neck","body","belly","legs"];function S(){O("player"),r.enemy.health>=1&&O("enemy")}function O(t){var e,n;"player"===t?(e="player",n="enemy"):"enemy"===t&&(e="enemy",n="player");var a=e+"Attack",o=n+"Defend";r.battle[a].forEach(function(t){var a=r.player.critChance>Math.random(),c=a?Math.floor(r[e].attack*r[e].critMultiplier):r[e].attack,i="player"===e,u=i?"character":"enemy",l=i?"enemy":"character",s={attackerName:r[e].name,defenderName:r[n].name,attackZone:t,isCrit:a,damage:c,isBlocked:r.battle[o].includes(t),attackingCharacterSpan:u,defendingCharacterSpan:l,characterAttack:e,characterDefend:n};r.battle.log.push(s),s.isCrit&&s.isBlocked?E(s):s.isBlocked?j(s):E(s),function(t,e){r[t].health=r[t].health-e,G()}(s.characterDefend,c)})}function E(e){e.damage,e.characterDefend;var n=document.createElement("div");n.classList.add("battle__log-item"),n.innerHTML=function(t){var e=t.attackerName,n=t.defenderName,r=t.attackZone,a=t.isCrit,o=t.damage,c=t.isBlocked,i=t.attackingCharacterSpan,u=t.defendingCharacterSpan,l=r[0].toUpperCase()+r.slice(1);return a&&c?'\n            <span class="battle__log-item-'.concat(i,' battle__log-item-span" data-battle_log_character_span>').concat(e,'</span>\n            attacked\n            <span class="battle__log-item-').concat(u,' battle__log-item-span" data-battle_log_enemy_span>').concat(n,'</span>\n            to\n            <span class="battle__log-item-zone battle__log-item-span" data-battle_log_zone_span>').concat(l,'</span>\n            <span class="battle__log-item-').concat(u,' battle__log-item-span" data-battle_log_enemy_span>').concat(n,'</span>\n            tried to block but <span class="battle__log-item-').concat(i,' battle__log-item-span" data-battle_log_character_span>').concat(e,'</span> was very lucky and crit his opponent for <span class="battle__log-item-damage battle__log-item-span" data-battle_log_zone_span>').concat(o," damage</span>\n    "):a?'\n            <span class="battle__log-item-'.concat(i,' battle__log-item-span" data-battle_log_character_span>').concat(e,'</span>\n            attacked\n            <span class="battle__log-item-').concat(u,' battle__log-item-span" data-battle_log_enemy_span>').concat(n,'</span>\n            to\n            <span class="battle__log-item-zone battle__log-item-span" data-battle_log_zone_span>').concat(l,'</span>\n            and crit\n            <span class="battle__log-item-damage battle__log-item-span" data-battle_log_zone_span>').concat(o," damage</span>\n    "):'\n            <span class="battle__log-item-'.concat(i,' battle__log-item-span" data-battle_log_character_span>').concat(e,'</span>\n            attacked\n            <span class="battle__log-item-').concat(u,' battle__log-item-span" data-battle_log_enemy_span>').concat(n,'</span>\n            to\n            <span class="battle__log-item-zone battle__log-item-span" data-battle_log_zone_span>').concat(l,'</span>\n            and deal\n            <span class="battle__log-item-damage battle__log-item-span" data-battle_log_zone_span>').concat(o," damage</span>\n    ")}(e),t.append(n),t.scrollTop=t.scrollHeight}function j(e){e.attackerName,e.defenderName,e.attackZone;var n=document.createElement("div");n.classList.add("battle__log-item"),n.innerHTML=function(t){var e=t.attackerName,n=t.defenderName,r=t.attackZone,a=t.attackingCharacterSpan,o=t.defendingCharacterSpan,c=r[0].toUpperCase()+r.slice(1);return'\n            <span class="battle__log-item-'.concat(a,' battle__log-item-span" data-battle_log_character_span>').concat(e,'</span>\n            attacked\n            <span class="battle__log-item-').concat(o,' battle__log-item-span" data-battle_log_enemy_span>').concat(n,'</span>\n            to\n            <span class="battle__log-item-zone battle__log-item-span" data-battle_log_zone_span>').concat(c,'</span>\n            but <span class="battle__log-item-').concat(o,' battle__log-item-span" data-battle_log_enemy_span>').concat(n,'</span>\n            was able to <span class="battle__log-item-defend battle__log-item-span" data-battle_log_protect_span>protect</span>\n            his  <span class="battle__log-item-zone battle__log-item-span" data-battle_log_zone_span>').concat(c,"</span>\n    ")}(e),t.append(n),t.scrollTop=t.scrollHeight}function L(t){return x.apply(this,arguments)}function x(){var e;return e=p().m(function e(n){var r,a,o,c;return p().w(function(e){for(;;)switch(e.n){case 0:return console.log(t.scrollHeight),r=t.scrollTop,e.n=1,jt("./views/popup_results.html");case 1:(a=document.querySelector("[data-battle_log]"))&&(a.scrollTop=r),document.querySelector('[data-popup="results"]'),o=document.querySelector("[data-popup__title]"),(c=document.createElement("img")).classList.add("popup__results-icon"),"win"===n?(c.src=l,o.textContent="Congratulations with your win!",o.append(c),q(),it('[data-popup="results"]')):(c.src=s,o.textContent="Maybe next time",o.append(c),T(),it('[data-popup="results"]'));case 2:return e.a(2)}},e)}),x=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function c(t){d(o,r,a,c,i,"next",t)}function i(t){d(o,r,a,c,i,"throw",t)}c(void 0)})},x.apply(this,arguments)}function T(){r.player.loses=r.player.loses+1,a()}function q(){r.player.wins=r.player.wins+1,a()}function G(){var t=document.querySelector("[data-battle_character_avatar_img]"),e=document.querySelector("[data-battle_character_name]"),n=document.querySelector("[data-battle_character_current_health]"),a=document.querySelector("[data-battle_character_total_health]"),o=document.querySelector("[data-avatar_health_bg]"),c=document.querySelector("[data-enemy_health_bg]");t.src=r.player.avatar,e.textContent=r.player.name,r.player.health>=1?(n.textContent=r.player.health,o.style.width="".concat(100*r.player.health/r.player.maxHealth,"%")):(n.textContent=0,o.style.width="0%",b||(b=!0,L("lose"))),a.textContent=r.player.maxHealth;var i=document.querySelector("[data-battle_enemy_avatar_img]"),u=document.querySelector("[data-battle_enemy_name]"),l=document.querySelector("[data-battle_enemy_current_health]"),s=document.querySelector("[data-battle_enemy_total_health]");i.src=r.enemy.avatar,u.textContent=r.enemy.name,r.enemy.health>0?(l.textContent=r.enemy.health,c.style.width="".concat(100*r.enemy.health/r.enemy.maxHealth,"%")):(l.textContent=0,c.style.width="0%",b||(b=!0,L("win"))),s.textContent=r.enemy.maxHealth}S()}function w(){b=!1,r.player.health=r.player.maxHealth,r.enemy={},r.battle.log=[],document.querySelector("[data-battle_log]").textContent="",a()}function k(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var u=r&&r.prototype instanceof i?r:i,l=Object.create(u.prototype);return S(l,"_invoke",function(n,r,a){var o,i,u,l=0,s=a||[],p=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return o=e,i=0,u=t,f.n=n,c}};function d(n,r){for(i=n,u=r,e=0;!p&&l&&!a&&e<s.length;e++){var a,o=s[e],d=f.p,h=o[2];n>3?(a=h===r)&&(u=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=d&&((a=n<2&&d<o[1])?(i=0,f.v=r,f.n=o[1]):d<h&&(a=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,f.n=h,i=0))}if(a||n>1)return c;throw p=!0,r}return function(a,s,h){if(l>1)throw TypeError("Generator is already running");for(p&&1===s&&d(s,h),i=s,u=h;(e=i<2?t:u)||!p;){o||(i?i<3?(i>1&&(f.n=-1),d(i,u)):f.n=u:f.v=u);try{if(l=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(p=f.n<0)?u:n.call(r,f))!==c)break}catch(e){o=t,i=1,u=e}finally{l=1}}return{value:e,done:p}}}(n,a,o),!0),l}var c={};function i(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(S(e={},r,function(){return this}),e),p=l.prototype=i.prototype=Object.create(s);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,S(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=l,S(p,"constructor",l),S(l,"constructor",u),u.displayName="GeneratorFunction",S(l,a,"GeneratorFunction"),S(p),S(p,a,"Generator"),S(p,r,function(){return this}),S(p,"toString",function(){return"[object Generator]"}),(k=function(){return{w:o,m:f}})()}function S(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}S=function(t,e,n,r){function o(e,n){S(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},S(t,e,n,r)}function O(t,e,n,r,a,o,c){try{var i=t[o](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,a)}function E(){return j.apply(this,arguments)}function j(){var t;return t=k().m(function t(){return k().w(function(t){for(;;)switch(t.n){case 0:document.querySelector("[data-home_title_name]").textContent=r.player.name;case 1:return t.a(2)}},t)}),j=function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function c(t){O(o,r,a,c,i,"next",t)}function i(t){O(o,r,a,c,i,"throw",t)}c(void 0)})},j.apply(this,arguments)}function L(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var u=r&&r.prototype instanceof i?r:i,l=Object.create(u.prototype);return x(l,"_invoke",function(n,r,a){var o,i,u,l=0,s=a||[],p=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return o=e,i=0,u=t,f.n=n,c}};function d(n,r){for(i=n,u=r,e=0;!p&&l&&!a&&e<s.length;e++){var a,o=s[e],d=f.p,h=o[2];n>3?(a=h===r)&&(u=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=d&&((a=n<2&&d<o[1])?(i=0,f.v=r,f.n=o[1]):d<h&&(a=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,f.n=h,i=0))}if(a||n>1)return c;throw p=!0,r}return function(a,s,h){if(l>1)throw TypeError("Generator is already running");for(p&&1===s&&d(s,h),i=s,u=h;(e=i<2?t:u)||!p;){o||(i?i<3?(i>1&&(f.n=-1),d(i,u)):f.n=u:f.v=u);try{if(l=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(p=f.n<0)?u:n.call(r,f))!==c)break}catch(e){o=t,i=1,u=e}finally{l=1}}return{value:e,done:p}}}(n,a,o),!0),l}var c={};function i(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(x(e={},r,function(){return this}),e),p=l.prototype=i.prototype=Object.create(s);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,x(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=l,x(p,"constructor",l),x(l,"constructor",u),u.displayName="GeneratorFunction",x(l,a,"GeneratorFunction"),x(p),x(p,a,"Generator"),x(p,r,function(){return this}),x(p,"toString",function(){return"[object Generator]"}),(L=function(){return{w:o,m:f}})()}function x(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}x=function(t,e,n,r){function o(e,n){x(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},x(t,e,n,r)}function T(t,e,n,r,a,o,c){try{var i=t[o](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,a)}function q(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function c(t){T(o,r,a,c,i,"next",t)}function i(t){T(o,r,a,c,i,"throw",t)}c(void 0)})}}function G(){return P.apply(this,arguments)}function P(){return P=q(L().m(function t(){var e,n;return L().w(function(t){for(;;)switch(t.n){case 0:e=document.querySelector("[data-register_btn]"),n=document.querySelector("[data-register_input]"),h&&e&&e.removeEventListener("click",h),y&&n&&n.removeEventListener("input",y),h=function(){var t=q(L().m(function t(e){return L().w(function(t){for(;;)switch(t.n){case 0:return r.player.name=n.value,a(),t.n=1,D(e);case 1:return t.n=2,E();case 2:return t.n=3,R();case 3:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),y=function(t){t.target.value.length>=1?e.disabled=!1:e.disabled=!0},e&&n&&(e.addEventListener("click",h),n.addEventListener("input",y));case 1:return t.a(2)}},t)})),P.apply(this,arguments)}var C=null,F=null;function M(){var t=document.querySelector("[data-settings_change_name]"),e=document.querySelector("[data-edit_change_name]"),n=document.querySelector("[data-settings_change_name_input]"),o=document.querySelector("[data-settings_change-name_current_name]");o.textContent=r.player.name;var c=r.player.name;C&&(e.removeEventListener("click",C),t.classList.remove("settings__change-name--active"),e.textContent="Edit",o.textContent=c),F&&n.removeEventListener("input",F),C=function(i){t.classList.contains("settings__change-name--active")?(t.classList.remove("settings__change-name--active"),e.textContent="Edit",o.textContent=c):(t.classList.add("settings__change-name--active"),e.textContent="Save",n.value=c),r.player.name=n.value.trim(),a()},F=function(t){var n=t.target;n.value?(e.disabled=!1,c=n.value.trim()):e.disabled=!0},e.addEventListener("click",C),n.addEventListener("input",F)}function N(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var u=r&&r.prototype instanceof i?r:i,l=Object.create(u.prototype);return H(l,"_invoke",function(n,r,a){var o,i,u,l=0,s=a||[],p=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return o=e,i=0,u=t,f.n=n,c}};function d(n,r){for(i=n,u=r,e=0;!p&&l&&!a&&e<s.length;e++){var a,o=s[e],d=f.p,h=o[2];n>3?(a=h===r)&&(u=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=d&&((a=n<2&&d<o[1])?(i=0,f.v=r,f.n=o[1]):d<h&&(a=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,f.n=h,i=0))}if(a||n>1)return c;throw p=!0,r}return function(a,s,h){if(l>1)throw TypeError("Generator is already running");for(p&&1===s&&d(s,h),i=s,u=h;(e=i<2?t:u)||!p;){o||(i?i<3?(i>1&&(f.n=-1),d(i,u)):f.n=u:f.v=u);try{if(l=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(p=f.n<0)?u:n.call(r,f))!==c)break}catch(e){o=t,i=1,u=e}finally{l=1}}return{value:e,done:p}}}(n,a,o),!0),l}var c={};function i(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(H(e={},r,function(){return this}),e),p=l.prototype=i.prototype=Object.create(s);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,H(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=l,H(p,"constructor",l),H(l,"constructor",u),u.displayName="GeneratorFunction",H(l,a,"GeneratorFunction"),H(p),H(p,a,"Generator"),H(p,r,function(){return this}),H(p,"toString",function(){return"[object Generator]"}),(N=function(){return{w:o,m:f}})()}function H(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}H=function(t,e,n,r){function o(e,n){H(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},H(t,e,n,r)}function Z(t,e,n,r,a,o,c){try{var i=t[o](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,a)}function z(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function c(t){Z(o,r,a,c,i,"next",t)}function i(t){Z(o,r,a,c,i,"throw",t)}c(void 0)})}}var A={"/home":"/views/home.html","/character":"/views/character.html","/settings":"/views/settings.html","/battle":"/views/battle.html"},D=function(){var t=z(N().m(function t(e){var n,r;return N().w(function(t){for(;;)switch(t.n){case 0:return n=e.target,r=n.dataset.link,window.history.pushState({},"",r),t.n=1,B();case 1:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),B=function(){var t=z(N().m(function t(){var e,n,r,a;return N().w(function(t){for(;;)switch(t.n){case 0:return e=window.location.pathname,n=A[e],t.n=1,fetch(n).then(function(t){return t.text()});case 1:return r=t.v,t.n=2,fetch("./views/toolbar.html").then(function(t){return t.text()});case 2:a=t.v,document.getElementById("root").innerHTML=r,document.getElementById("root").innerHTML+=a,(0,{"/":G,"/home":E,"/character":_t,"/settings":M,"/battle":g}[e])(),R();case 3:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}();function I(t){return t[0].toUpperCase()+t.slice(1)}function J(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var u=r&&r.prototype instanceof i?r:i,l=Object.create(u.prototype);return U(l,"_invoke",function(n,r,a){var o,i,u,l=0,s=a||[],p=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return o=e,i=0,u=t,f.n=n,c}};function d(n,r){for(i=n,u=r,e=0;!p&&l&&!a&&e<s.length;e++){var a,o=s[e],d=f.p,h=o[2];n>3?(a=h===r)&&(u=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=d&&((a=n<2&&d<o[1])?(i=0,f.v=r,f.n=o[1]):d<h&&(a=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,f.n=h,i=0))}if(a||n>1)return c;throw p=!0,r}return function(a,s,h){if(l>1)throw TypeError("Generator is already running");for(p&&1===s&&d(s,h),i=s,u=h;(e=i<2?t:u)||!p;){o||(i?i<3?(i>1&&(f.n=-1),d(i,u)):f.n=u:f.v=u);try{if(l=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(p=f.n<0)?u:n.call(r,f))!==c)break}catch(e){o=t,i=1,u=e}finally{l=1}}return{value:e,done:p}}}(n,a,o),!0),l}var c={};function i(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(U(e={},r,function(){return this}),e),p=l.prototype=i.prototype=Object.create(s);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,U(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=l,U(p,"constructor",l),U(l,"constructor",u),u.displayName="GeneratorFunction",U(l,a,"GeneratorFunction"),U(p),U(p,a,"Generator"),U(p,r,function(){return this}),U(p,"toString",function(){return"[object Generator]"}),(J=function(){return{w:o,m:f}})()}function U(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}U=function(t,e,n,r){function o(e,n){U(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},U(t,e,n,r)}function K(t,e,n,r,a,o,c){try{var i=t[o](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,a)}function Q(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function c(t){K(o,r,a,c,i,"next",t)}function i(t){K(o,r,a,c,i,"throw",t)}c(void 0)})}}function R(){return V.apply(this,arguments)}function V(){return V=Q(J().m(function t(){return J().w(function(t){for(;;)switch(t.n){case 0:document.querySelectorAll("[data-link]").forEach(function(t){t.dataset.link,t.addEventListener("click",function(){var e=Q(J().m(function e(n){var r;return J().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,D(n);case 1:r=t.dataset.page_btn,document.querySelector("[data-page_title]").textContent=I(r);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}())});case 1:return t.a(2)}},t)})),V.apply(this,arguments)}function W(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var u=r&&r.prototype instanceof i?r:i,l=Object.create(u.prototype);return X(l,"_invoke",function(n,r,a){var o,i,u,l=0,s=a||[],p=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return o=e,i=0,u=t,f.n=n,c}};function d(n,r){for(i=n,u=r,e=0;!p&&l&&!a&&e<s.length;e++){var a,o=s[e],d=f.p,h=o[2];n>3?(a=h===r)&&(u=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=d&&((a=n<2&&d<o[1])?(i=0,f.v=r,f.n=o[1]):d<h&&(a=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,f.n=h,i=0))}if(a||n>1)return c;throw p=!0,r}return function(a,s,h){if(l>1)throw TypeError("Generator is already running");for(p&&1===s&&d(s,h),i=s,u=h;(e=i<2?t:u)||!p;){o||(i?i<3?(i>1&&(f.n=-1),d(i,u)):f.n=u:f.v=u);try{if(l=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(p=f.n<0)?u:n.call(r,f))!==c)break}catch(e){o=t,i=1,u=e}finally{l=1}}return{value:e,done:p}}}(n,a,o),!0),l}var c={};function i(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(X(e={},r,function(){return this}),e),p=l.prototype=i.prototype=Object.create(s);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,X(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=l,X(p,"constructor",l),X(l,"constructor",u),u.displayName="GeneratorFunction",X(l,a,"GeneratorFunction"),X(p),X(p,a,"Generator"),X(p,r,function(){return this}),X(p,"toString",function(){return"[object Generator]"}),(W=function(){return{w:o,m:f}})()}function X(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}X=function(t,e,n,r){function o(e,n){X(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},X(t,e,n,r)}function Y(t,e,n,r,a,o,c){try{var i=t[o](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,a)}function $(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function c(t){Y(o,r,a,c,i,"next",t)}function i(t){Y(o,r,a,c,i,"throw",t)}c(void 0)})}}window.addEventListener("popstate",B);var tt=null,et=null,nt=null,rt=null,at=null,ot=null,ct=null;function it(t){return ut.apply(this,arguments)}function ut(){return ut=$(W().m(function t(n){var o,l,s,p,f,d,h,y,v,m,_;return W().w(function(t){for(;;)switch(t.n){case 0:o=document.querySelector("body"),l=document.querySelector(n),s=l.querySelector("[data-popup_container]"),p=[{opacity:"0"},{opacity:"1"}],f={duration:400,fill:"forwards"},s.animate(p,f),l.classList.add("popup--active"),o.classList.add("lock"),d=document.querySelector('[data-avatar_name="frodo"]'),h=document.querySelector('[data-avatar_name="gandalf"]'),y=document.querySelector('[data-avatar_name="aragorn"]'),v=document.querySelector('[data-avatar_name="legolas"]'),tt&&l.removeEventListener("click",tt),et&&d&&d.removeEventListener("click",et),nt&&h&&h.removeEventListener("click",nt),rt&&y&&y.removeEventListener("click",rt),at&&v&&v.removeEventListener("click",at),tt=function(t){var e=t.target;e.closest(".popup__container")||(lt(n),'[data-popup="results"]'===n&&(w(),g(),a())),e.closest(".popup__close")&&(lt(n),'[data-popup="results"]'===n&&(w(),g(),a()))},et=function(t){r.player.avatar=e,_t(),a(),lt('[data-popup="character_change"]')},nt=function(t){r.player.avatar=c,_t(),a(),lt('[data-popup="character_change"]')},rt=function(t){r.player.avatar=i,_t(),a(),lt('[data-popup="character_change"]')},at=function(t){r.player.avatar=u,_t(),a(),lt('[data-popup="character_change"]')},l.addEventListener("click",tt),d&&h&&y&&v&&(d.addEventListener("click",et),h.addEventListener("click",nt),y.addEventListener("click",rt),v.addEventListener("click",at)),m=document.querySelector("[data-popup_results_btn_fight]"),_=document.querySelector("[data-popup_results_btn_character]"),ot&&m&&m.removeEventListener("click",ot),ct&&_&&_.removeEventListener("click",ct),ct=function(){var t=$(W().m(function t(e){return W().w(function(t){for(;;)switch(t.n){case 0:return lt('[data-popup="results"'),w(),g(),t.n=1,Ot("./views/character.html");case 1:return t.n=2,jt("./views/toolbar.html");case 2:_t(),a();case 3:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),ot=function(t){lt('[data-popup="results"'),w(),g(),a()},m&&_&&(m.addEventListener("click",ot),_.addEventListener("click",ct));case 1:return t.a(2)}},t)})),ut.apply(this,arguments)}function lt(t){var e=document.querySelector(t),n=e.querySelector("[data-popup_container]").animate([{opacity:"1"},{opacity:"0"}],{duration:400,fill:"forwards"}),r=document.querySelector('[data-popup="character_change"]');n.addEventListener("finish",function(){e.classList.remove("popup--active"),e.remove(),r&&_t(),R()})}function st(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var u=r&&r.prototype instanceof i?r:i,l=Object.create(u.prototype);return pt(l,"_invoke",function(n,r,a){var o,i,u,l=0,s=a||[],p=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return o=e,i=0,u=t,f.n=n,c}};function d(n,r){for(i=n,u=r,e=0;!p&&l&&!a&&e<s.length;e++){var a,o=s[e],d=f.p,h=o[2];n>3?(a=h===r)&&(u=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=d&&((a=n<2&&d<o[1])?(i=0,f.v=r,f.n=o[1]):d<h&&(a=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,f.n=h,i=0))}if(a||n>1)return c;throw p=!0,r}return function(a,s,h){if(l>1)throw TypeError("Generator is already running");for(p&&1===s&&d(s,h),i=s,u=h;(e=i<2?t:u)||!p;){o||(i?i<3?(i>1&&(f.n=-1),d(i,u)):f.n=u:f.v=u);try{if(l=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(p=f.n<0)?u:n.call(r,f))!==c)break}catch(e){o=t,i=1,u=e}finally{l=1}}return{value:e,done:p}}}(n,a,o),!0),l}var c={};function i(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(pt(e={},r,function(){return this}),e),p=l.prototype=i.prototype=Object.create(s);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,pt(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=l,pt(p,"constructor",l),pt(l,"constructor",u),u.displayName="GeneratorFunction",pt(l,a,"GeneratorFunction"),pt(p),pt(p,a,"Generator"),pt(p,r,function(){return this}),pt(p,"toString",function(){return"[object Generator]"}),(st=function(){return{w:o,m:f}})()}function pt(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}pt=function(t,e,n,r){function o(e,n){pt(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},pt(t,e,n,r)}function ft(t,e,n,r,a,o,c){try{var i=t[o](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,a)}function dt(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function c(t){ft(o,r,a,c,i,"next",t)}function i(t){ft(o,r,a,c,i,"throw",t)}c(void 0)})}}var ht=null,yt=null,vt=null,mt=null;function _t(){document.querySelector('[data-popup="character_change"]');var t=document.querySelector("[data-character_edit_container]"),e=document.querySelector("[data-character_avatar]"),n=document.querySelector("[data-character_avatar_btn]"),a=document.querySelector("[data-character_avatar_img]"),o=document.querySelector("[data-character_name]"),c=document.querySelector("[data-result_wins]"),i=document.querySelector("[data-result_loses]");a.src=r.player.avatar,o.textContent=r.player.name,c.textContent=r.player.wins,i.textContent=r.player.loses;var u="character__avatar-edit-container--active";t.classList.remove(u),ht&&e.removeEventListener("mouseover",ht),yt&&e.removeEventListener("mouseout",yt),vt&&t.removeEventListener("click",vt),mt&&n.removeEventListener("click",mt),ht=function(e){t.classList.add(u)},yt=function(e){t.classList.remove(u)},vt=function(){var t=dt(st().m(function t(e){return st().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,jt("./views/popup_character.html");case 1:return t.n=2,it('[data-popup="character_change"]');case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),mt=function(){var t=dt(st().m(function t(e){return st().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,jt("./views/popup_character.html");case 1:return t.n=2,it('[data-popup="character_change"]');case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),e.addEventListener("mouseover",ht),e.addEventListener("mouseout",yt),t.addEventListener("click",vt),n.addEventListener("click",mt)}function bt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var u=r&&r.prototype instanceof i?r:i,l=Object.create(u.prototype);return gt(l,"_invoke",function(n,r,a){var o,i,u,l=0,s=a||[],p=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return o=e,i=0,u=t,f.n=n,c}};function d(n,r){for(i=n,u=r,e=0;!p&&l&&!a&&e<s.length;e++){var a,o=s[e],d=f.p,h=o[2];n>3?(a=h===r)&&(u=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=d&&((a=n<2&&d<o[1])?(i=0,f.v=r,f.n=o[1]):d<h&&(a=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,f.n=h,i=0))}if(a||n>1)return c;throw p=!0,r}return function(a,s,h){if(l>1)throw TypeError("Generator is already running");for(p&&1===s&&d(s,h),i=s,u=h;(e=i<2?t:u)||!p;){o||(i?i<3?(i>1&&(f.n=-1),d(i,u)):f.n=u:f.v=u);try{if(l=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(p=f.n<0)?u:n.call(r,f))!==c)break}catch(e){o=t,i=1,u=e}finally{l=1}}return{value:e,done:p}}}(n,a,o),!0),l}var c={};function i(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(gt(e={},r,function(){return this}),e),p=l.prototype=i.prototype=Object.create(s);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,gt(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=l,gt(p,"constructor",l),gt(l,"constructor",u),u.displayName="GeneratorFunction",gt(l,a,"GeneratorFunction"),gt(p),gt(p,a,"Generator"),gt(p,r,function(){return this}),gt(p,"toString",function(){return"[object Generator]"}),(bt=function(){return{w:o,m:f}})()}function gt(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}gt=function(t,e,n,r){function o(e,n){gt(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},gt(t,e,n,r)}function wt(t,e,n,r,a,o,c){try{var i=t[o](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,a)}function kt(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function c(t){wt(o,r,a,c,i,"next",t)}function i(t){wt(o,r,a,c,i,"throw",t)}c(void 0)})}}function St(){return(St=kt(bt().m(function t(){return bt().w(function(t){for(;;)switch(t.n){case 0:if(o(),!r.player.name){t.n=5;break}return t.n=1,Ot("./views/home.html");case 1:return t.n=2,jt("./views/toolbar.html");case 2:return t.n=3,R();case 3:return t.n=4,E();case 4:B(),t.n=7;break;case 5:return r.player.avatar=e,t.n=6,Ot("./views/register.html");case 6:return t.n=7,G();case 7:return t.a(2)}},t)}))).apply(this,arguments)}function Ot(t){return Et.apply(this,arguments)}function Et(){return(Et=kt(bt().m(function t(e){var n;return bt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch(e).then(function(t){return t.text()});case 1:n=t.v,document.getElementById("root").innerHTML=n;case 2:return t.a(2)}},t)}))).apply(this,arguments)}function jt(t){return Lt.apply(this,arguments)}function Lt(){return(Lt=kt(bt().m(function t(e){var n;return bt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch(e).then(function(t){return t.text()});case 1:n=t.v,document.getElementById("root").innerHTML+=n;case 2:return t.a(2)}},t)}))).apply(this,arguments)}window.addEventListener("DOMContentLoaded",function(){o(),function(){St.apply(this,arguments)}()})}();